(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3811b448"],{"14eb":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page"},[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination justify-content-center"},[e("li",{staticClass:"page-item",class:{disabled:"1"==t.pageData.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.changePage(t.pageData.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pageData.total_page,(function(a,s){return e("li",{key:s,staticClass:"page-item",class:{active:t.pageData.current_page==a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:t.pageData.current_page==t.pageData.total_page}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.changePage(t.pageData.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},i=[],n={data:function(){return{}},name:"Page",props:["pageData"],methods:{changePage:function(t){this.$emit("page-change",t)}}},l=n,o=e("2877"),r=Object(o["a"])(l,s,i,!1,null,null,null);a["a"]=r.exports},"99af":function(t,a,e){"use strict";var s=e("23e7"),i=e("d039"),n=e("e8b5"),l=e("861d"),o=e("7b0b"),r=e("50c4"),c=e("8418"),d=e("65f0"),u=e("1dde"),p=e("b622"),g=e("2d00"),h=p("isConcatSpreadable"),f=9007199254740991,m="Maximum allowed index exceeded",v=g>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),b=u("concat"),_=function(t){if(!l(t))return!1;var a=t[h];return void 0!==a?!!a:n(t)},C=!v||!b;s({target:"Array",proto:!0,forced:C},{concat:function(t){var a,e,s,i,n,l=o(this),u=d(l,0),p=0;for(a=-1,s=arguments.length;a<s;a++)if(n=-1===a?l:arguments[a],_(n)){if(i=r(n.length),p+i>f)throw TypeError(m);for(e=0;e<i;e++,p++)e in n&&c(u,p,n[e])}else{if(p>=f)throw TypeError(m);c(u,p++,n)}return u.length=p,u}})},b654:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"firmQA"},[e("loading",{attrs:{active:t.isLoading,loader:"bars"},on:{"update:active":function(a){t.isLoading=a}}}),e("QAModal",{attrs:{QADetail:t.QADetail}}),e("ul",{staticClass:"nav nav-tabs nav-fill text-center",attrs:{id:"myTab",role:"tablist"}},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active",attrs:{id:"whole-tab","data-toggle":"tab",href:"#whole",role:"tab","aria-controls":"whole","aria-selected":"true"},on:{click:function(a){return t.changeState("all")}}},[t._v("全部")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{id:"already-tab","data-toggle":"tab",href:"#already",role:"tab","aria-controls":"already","aria-selected":"false"},on:{click:function(a){return t.changeState("2")}}},[t._v("已回覆")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{id:"yet-tab","data-toggle":"tab",href:"#yet",role:"tab","aria-controls":"yet","aria-selected":"false"},on:{click:function(a){return t.changeState("1")}}},[t._v("未回覆")])])]),e("div",{staticClass:"bg-white text-nowrap tab-content border border-top-0",attrs:{id:"myTabContent"}},[t.isLoading?t._e():e("div",{staticClass:"tab-pane p-3 fade show active",attrs:{id:"whole",role:"tabpanel","aria-labelledby":"whole-tab"}},[e("QAList",{attrs:{QAData:t.QAData},on:{"open-detail":t.openDetail}}),0!=t.pagelist.total?e("page",{staticClass:"mt-3",attrs:{"page-data":t.pagelist},on:{"page-change":t.getData}}):t._e()],1),t.isLoading?t._e():e("div",{staticClass:"tab-pane p-3 fade",attrs:{id:"already",role:"tabpanel","aria-labelledby":"already-tab"}},[e("QAList",{attrs:{QAData:t.QAData},on:{"open-detail":t.openDetail}}),0!=t.pagelist.total?e("page",{staticClass:"mt-3",attrs:{"page-data":t.pagelist},on:{"page-change":t.getData}}):t._e()],1),t.isLoading?t._e():e("div",{staticClass:"tab-pane p-3 fade",attrs:{id:"yet",role:"tabpanel","aria-labelledby":"yet-tab"}},[e("QAList",{attrs:{QAData:t.QAData},on:{"open-detail":t.openDetail}}),0!=t.pagelist.total?e("page",{staticClass:"mt-3",attrs:{"page-data":t.pagelist},on:{"page-change":t.getData}}):t._e()],1)])],1)},i=[],n=(e("99af"),e("9062")),l=e.n(n),o=(e("e40d"),e("14eb")),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table-responsive-lg"},[e("table",{staticClass:"table table-hover"},[t._m(0),e("tbody",t._l(t.QAData,(function(a,s){return e("tr",{key:s},[e("th",{attrs:{scope:"row"}},[e("span",{staticClass:"font-weight-normal",class:{"text-danger":"未回覆"==a.state}},[t._v(t._s(a.state))]),e("p",{staticClass:"text-muted"},[e("small",[t._v(t._s(a.postday))])])]),e("td",[e("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"150px"}},[t._v(t._s(a.message))])]),e("td",[e("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"120px"}},[e("router-link",{attrs:{target:"_blank",to:"/FirmPage/"+a.companyseq+"/Room/"+a.roomseq}},[t._v(t._s(a.roomname))])],1)]),e("td",[e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"modal"},on:{click:function(e){return t.openDetail(a)}}},[t._v("詳情")])])])})),0)])])},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("狀態")]),e("th",{attrs:{scope:"col"}},[t._v("問題")]),e("th",{attrs:{scope:"col"}},[t._v("空間名稱")]),e("th",{attrs:{scope:"col"}},[t._v("操作")])])])}],d={data:function(){return{loading:!1}},name:"QAList",props:["QAData"],methods:{openDetail:function(t){this.$emit("open-detail",t)}}},u=d,p=e("2877"),g=Object(p["a"])(u,r,c,!1,null,null,null),h=g.exports,f=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"QAModal modal fade",attrs:{id:"QAModal",tabindex:"-1","aria-labelledby":"QAModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{id:"QAModal"}},[e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"py-3"},[e("p",[t._v(" "+t._s(t.QADetail.name)+" "),e("small",{staticClass:"text-muted"},[t._v("("+t._s(t.QADetail.question_date)+")")])]),e("p",{staticClass:"m-0"},[t._v("："+t._s(t.QADetail.question))])]),""!=t.QADetail.answer?e("div",{staticClass:"bg-light border p-3"},[e("p",[t._v("你的回覆："+t._s(t.QADetail.answer))]),e("p",{staticClass:"m-0 text-right text-muted"},[e("small",[t._v("("+t._s(t.QADetail.answer_date)+")")])])]):t._e(),""==t.QADetail.answer?e("div",{staticClass:"form-group mt-3"},[e("hr"),e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("form",{on:{submit:function(a){return a.preventDefault(),t.sendReply(a)}}},[e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"h5",attrs:{for:"reply"}},[t._v("回覆")]),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]),e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.answerBox,expression:"answerBox",modifiers:{trim:!0}}],staticClass:"form-control",class:i,attrs:{id:"reply",rows:"3"},domProps:{value:t.answerBox},on:{input:function(a){a.target.composing||(t.answerBox=a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})]}}],null,!0)}),e("button",{staticClass:"btn btn-success mt-2 w-100",class:{disabled:s},attrs:{type:"submit",disabled:s}},[t._v("送出")])],1)]}}],null,!1,4098970244)})],1):t._e()]),t._m(1)])])])},m=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-success"},[e("h5",{staticClass:"modal-title",attrs:{id:"QAModalLabel"}},[t._v("回覆")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-success",attrs:{type:"button","data-dismiss":"modal"}},[t._v("關閉")])])}],v=e("3dd1"),b=e.n(v),_=(e("415b"),{data:function(){return{answerBox:""}},name:"QAModal",props:["QADetail"],methods:{sendReply:function(){var t={method:"post",url:"http://pettrip.rocket-coding.com/api/Qa/PostAnswer",data:{queseq:this.QADetail.queseq,message:this.answerBox}};this.$http(t).then((function(t){console.log(t),b.a.fire({toast:!0,position:"top-end",icon:"success",title:"回覆成功",showConfirmButton:!1,timer:2e3})})).catch((function(t){console.log(t)}))}}}),C=_,D=Object(p["a"])(C,f,m,!1,null,null,null),Q=D.exports,y={data:function(){return{isLoading:!1,pagelist:{},QAData:{},QADetail:{},state:null}},components:{loading:l.a,page:o["a"],QAList:h,QAModal:Q},created:function(){this.getData()},methods:{getData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$emit("checkStatus");var a=this;this.isLoading=!0;var e={method:"get",url:"http://pettrip.rocket-coding.com/api/Qa/GetQuestion?page=".concat(t,"&state=").concat(this.state)};console.log(e),this.$http(e).then((function(t){console.log(t),a.QAData=t.data.question,a.pagelist=t.data.meta,a.isLoading=!1})).catch((function(t){console.log(t),a.isLoading=!1}))},changeState:function(t){"all"===t?(this.state=null,this.getData()):"1"===t?(this.state="1",this.getData()):"2"===t&&(this.state="2",this.getData())},openDetail:function(t){var a=this,e={method:"get",url:"http://pettrip.rocket-coding.com/api/Qa/GetQuestionDetail?queseq=".concat(t.queseq)};this.$http(e).then((function(t){console.log(t),a.QADetail=t.data,$("#QAModal").modal("show")})).catch((function(t){console.log(t)}))}}},A=y,w=Object(p["a"])(A,s,i,!1,null,null,null);a["default"]=w.exports}}]);
//# sourceMappingURL=chunk-3811b448.bb9f66e2.js.map