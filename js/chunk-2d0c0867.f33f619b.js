(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0867"],{"41c7":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"memberSet"},[null!=t.memberData.membername?a("div",{staticClass:"row no-gutters text-wrap align-items-center"},[a("div",{staticClass:"col-lg-6 col-12"},[a("div",{staticClass:"rounded-circle mx-auto overflow-hidden",staticStyle:{"background-size":"cover","max-width":"300px","background-position":"center"},style:{backgroundImage:"url("+t.memberData.avatar+")"}},[a("img",{staticClass:"w-100 img-fluid",class:{opacityZero:null!=t.memberData.avatar},attrs:{src:"https://upload.cc/i1/2020/09/01/IaZYfp.png",alt:""}})]),a("div",{staticClass:"form-group d-flex my-4"},[a("label",{staticClass:"btn btn-primary mx-auto",class:{disabled:t.MemberPicUploading},attrs:{for:"upload"}},[t.MemberPicUploading?a("i",{staticClass:"mr-1 fas fa-spinner fa-spin"}):t._e(),t._v("更新頭像 "),a("input",{staticClass:"d-none",attrs:{type:"file",id:"upload",disabled:t.MemberPicUploading},on:{change:t.updateMemberAvatar}})])])]),a("div",{staticClass:"col-lg-6 col-12"},[a("div",{staticClass:"row no-gutters"},[t._m(0),a("div",{staticClass:"col-md-8 col-12"},[a("p",[t._v(t._s(t.memberData.membername))])])]),a("div",{staticClass:"row no-gutters"},[t._m(1),a("div",{staticClass:"col-md-8 col-12"},[a("p",[t._v(t._s(t.memberData.email))])])]),a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.invalid;return[a("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.saveMemberData(e)}}},[a("ValidationProvider",{attrs:{name:"密碼",rules:"required|alpha_num"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,i=e.classes;return[a("div",{staticClass:"form-group row no-gutters"},[a("label",{staticClass:"col-md-4 col-form-label font-weight-bold",attrs:{for:"password"}},[t._v("新密碼")]),a("div",{staticClass:"col-md-8 col-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.memberData.pwd,expression:"memberData.pwd"}],staticClass:"form-control",class:i,attrs:{type:"password",id:"password"},domProps:{value:t.memberData.pwd},on:{input:function(e){e.target.composing||t.$set(t.memberData,"pwd",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(o[0]))])])])]}}],null,!0)}),a("ValidationProvider",{attrs:{rules:"required|password:@密碼|alpha_num"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,i=e.classes;return[a("div",{staticClass:"form-group row no-gutters"},[a("label",{staticClass:"col-md-4 col-form-label font-weight-bold",attrs:{for:"密碼"}},[t._v("再次輸入新密碼")]),a("div",{staticClass:"col-md-8 col-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.memberData.pwdcheck,expression:"memberData.pwdcheck"}],staticClass:"form-control",class:i,attrs:{type:"password",id:"密碼"},domProps:{value:t.memberData.pwdcheck},on:{input:function(e){e.target.composing||t.$set(t.memberData,"pwdcheck",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(o[0]))])])])]}}],null,!0)}),a("div",{staticClass:"form-group d-flex justify-content-center mt-4"},[a("button",{staticClass:"btn btn-primary",class:{disabled:o},attrs:{type:"submit",disabled:o}},[t._v("更新")])])],1)]}}],null,!1,1474955290)})],1)]):t._e()])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4 col-12 font-weight-bold"},[a("p",[t._v("姓名")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4 col-12 font-weight-bold"},[a("p",[t._v("信箱(帳號)")])])}],s=a("3dd1"),r=a.n(s),n=(a("415b"),{data:function(){return{memberData:{},MemberPicUploading:!1}},created:function(){this.getData()},props:["identify"],methods:{getData:function(){this.$emit("loadAction",!0);var t=this;this.$emit("checkStatus");var e={method:"get",url:"http://pettrip.rocket-coding.com/api/Member/GetOne"};this.$http(e).then((function(e){t.memberData=e.data,t.$emit("loadAction",!1),setTimeout((function(){"會員"!==t.identify.identity&&(r.a.fire({toast:!0,position:"top-end",icon:"error",title:"進入會員後台失敗",showConfirmButton:!1,timer:2e3}),t.$router.push("/"))}),500),$("html, body").animate({scrollTop:$(".headerNav").offset().top},0)})).catch((function(){t.$emit("loadAction",!1)}))},saveMemberData:function(){this.$emit("loadAction",!0);var t=this,e={method:"patch",url:"http://pettrip.rocket-coding.com/api/Member/Resetpwd",data:{pwd:"".concat(this.memberData.pwd)}};this.$http(e).then((function(e){r.a.fire({toast:!0,position:"top-end",icon:"success",title:"更新密碼成功",showConfirmButton:!1,timer:2e3}),t.getData()})).catch((function(){r.a.fire({toast:!0,position:"top-end",icon:"error",title:"更新密碼失敗",showConfirmButton:!1,timer:2e3}),t.$emit("loadAction",!1)}))},updateMemberAvatar:function(){var t=this,e=this,a=event.target.files[0],o=new FormData;o.append("file",a);var i="http://pettrip.rocket-coding.com/api/Member/Uploadimg";this.MemberPicUploading=!0,this.$http.post(i,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){t.MemberPicUploading=!1,"圖片格式錯誤"===a.data.result?r.a.fire({toast:!0,position:"top-end",icon:"error",title:"圖片格式錯誤",showConfirmButton:!1,timer:2e3}):"Uploadimg錯誤，請至伺服器log查詢錯誤訊息"===a.data.result?r.a.fire({toast:!0,position:"top-end",icon:"info",title:"圖片不可超過 2 MB",showConfirmButton:!1,timer:2e3}):(e.getData(),r.a.fire({toast:!0,position:"top-end",icon:"success",title:"頭像上傳成功",showConfirmButton:!1,timer:2e3}))})).catch((function(){r.a.fire({toast:!0,position:"top-end",icon:"error",title:"頭像上傳失敗",showConfirmButton:!1,timer:2e3}),t.MemberPicUploading=!1}))}}}),l=n,c=a("2877"),d=Object(c["a"])(l,o,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0c0867.f33f619b.js.map